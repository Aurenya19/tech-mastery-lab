<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ¯ TECH MASTERY LAB</title>
  
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  
  <!-- Stylesheets -->
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="logo-styles.css">
  <link rel="stylesheet" href="chat-fix.css">
  <link rel="stylesheet" href="mission-styles.css">
  <link rel="stylesheet" href="communities-enhanced.css">
  <link rel="stylesheet" href="communities.css">
  <link rel="stylesheet" href="modal-styles.css">
  <link rel="stylesheet" href="tabs-navigation.css">
</head>
<body>
  <!-- Matrix Background -->
  <canvas id="matrix"></canvas>
  
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="header__logo">
        <img src="logo.svg" alt="Logo" width="80" height="80">
      </div>
      <h1 class="header__title">ğŸ¯ TECH MASTERY LAB</h1>
      <p class="header__tagline">Mission Control - Your Tech Intelligence Hub</p>
      <p class="header__subtitle" id="last-update">Loading real-time data...</p>
    </header>
    
    <!-- Mission Dashboard -->
    <div id="mission-dashboard"></div>
    
    <!-- Tabs -->
    <div class="tabs-navigation">
      <button class="tab-btn active" onclick="switchTab('news')" data-tab="news">
        ğŸ“° News <span class="tab-count" id="news-count">0</span>
      </button>
      <button class="tab-btn" onclick="switchTab('research')" data-tab="research">
        ğŸ”¬ Research <span class="tab-count" id="research-count">0</span>
      </button>
      <button class="tab-btn" onclick="switchTab('github')" data-tab="github">
        ğŸ’» GitHub <span class="tab-count" id="github-count">0</span>
      </button>
      <button class="tab-btn" onclick="switchTab('reddit')" data-tab="reddit">
        ğŸ•µï¸ Reddit <span class="tab-count" id="reddit-count">0</span>
      </button>
      <button class="tab-btn" onclick="switchTab('map')" data-tab="map">
        ğŸ›°ï¸ Satellite
      </button>
      <button class="tab-btn" onclick="switchTab('communities')" data-tab="communities">
        ğŸŒ Communities <span class="tab-count">500</span>
      </button>
      <button class="tab-btn" onclick="switchTab('chat')" data-tab="chat">
        ğŸ’¬ Chat
      </button>
      <button class="tab-btn" onclick="switchTab('quiz')" data-tab="quiz">
        ğŸ§  Quiz <span class="tab-count">500</span>
      </button>
    </div>
    
    <!-- Tab Content -->
    <div class="tabs-content">
      <!-- News -->
      <div id="tab-news" class="tab-panel active">
        <div class="tab-panel__header">
          <h2>ğŸ“° HACKER NEWS</h2>
          <p class="tab-panel__subtitle">Live API - Auto-refresh every 5 minutes</p>
        </div>
        <input type="text" class="search-input" id="news-search" placeholder="ğŸ” Search news..." onkeyup="searchNews()">
        <div id="news-list" class="list"><div class="loading">Loading Hacker News...</div></div>
      </div>
      
      <!-- Research -->
      <div id="tab-research" class="tab-panel">
        <div class="tab-panel__header">
          <h2>ğŸ”¬ RESEARCH PAPERS</h2>
          <p class="tab-panel__subtitle">30 Famous Computer Science Papers</p>
        </div>
        <input type="text" class="search-input" id="research-search" placeholder="ğŸ” Search papers..." onkeyup="searchResearch()">
        <div id="research-list" class="list"><div class="loading">Loading research papers...</div></div>
      </div>
      
      <!-- GitHub -->
      <div id="tab-github" class="tab-panel">
        <div class="tab-panel__header">
          <h2>ğŸ’» GITHUB TRENDING</h2>
          <p class="tab-panel__subtitle">Live API - Auto-refresh every 15 minutes</p>
        </div>
        <input type="text" class="search-input" id="github-search" placeholder="ğŸ” Search repos..." onkeyup="searchGitHub()">
        <div id="github-list" class="list"><div class="loading">Loading GitHub trending...</div></div>
      </div>
      
      <!-- Reddit -->
      <div id="tab-reddit" class="tab-panel">
        <div class="tab-panel__header">
          <h2>ğŸ•µï¸ REDDIT TECH</h2>
          <p class="tab-panel__subtitle">Live API - Auto-refresh every 10 minutes</p>
        </div>
        <input type="text" class="search-input" id="reddit-search" placeholder="ğŸ” Search posts..." onkeyup="searchReddit()">
        <div id="reddit-list" class="list"><div class="loading">Loading Reddit posts...</div></div>
      </div>
      
      <!-- Map -->
      <div id="tab-map" class="tab-panel">
        <div class="tab-panel__header">
          <h2>ğŸ›°ï¸ GLOBAL TECH LABS - SATELLITE VIEW</h2>
          <p class="tab-panel__subtitle">Major Tech Research Centers Worldwide</p>
        </div>
        <div id="map" style="height: 600px; border-radius: 8px; margin-top: 20px;"></div>
      </div>
      
      <!-- Communities -->
      <div id="tab-communities" class="tab-panel">
        <div class="tab-panel__header">
          <h2>ğŸŒ TECH COMMUNITIES</h2>
          <p class="tab-panel__subtitle">500 Active Communities Worldwide</p>
        </div>
        <div id="communities-content"><div class="loading">Loading 500 communities...</div></div>
      </div>
      
      <!-- Chat -->
      <div id="tab-chat" class="tab-panel">
        <div class="tab-panel__header">
          <h2>ğŸ’¬ AI CHAT</h2>
          <p class="tab-panel__subtitle">Smart Responses + 8 Specialized Rooms</p>
        </div>
        <div class="chat-info">
          <span id="online-count">â— Online</span>
          <span id="current-room-name">General</span>
        </div>
        <div class="chat-rooms">
          <button class="chat-room active" onclick="switchRoom('general')">General</button>
          <button class="chat-room" onclick="switchRoom('ai-ml')">AI/ML</button>
          <button class="chat-room" onclick="switchRoom('space')">Space Tech</button>
          <button class="chat-room" onclick="switchRoom('coding')">Coding Help</button>
          <button class="chat-room" onclick="switchRoom('career')">Career</button>
          <button class="chat-room" onclick="switchRoom('india')">India Tech</button>
          <button class="chat-room" onclick="switchRoom('quiz')">Quiz</button>
          <button class="chat-room" onclick="switchRoom('research')">Research</button>
        </div>
        <div id="chat-messages" class="chat-messages"></div>
        <div class="chat-input-container">
          <input type="text" id="chat-input" class="chat-input" placeholder="Ask anything... (AI-powered)" onkeypress="handleChatKeyPress(event)">
          <button class="btn btn--primary" onclick="sendChatMessage()">Send ğŸš€</button>
        </div>
        <div class="chat-ai-status">
          <span id="ai-status">ğŸ¤– AI Ready - Ask me anything!</span>
        </div>
      </div>
      
      <!-- Quiz -->
      <div id="tab-quiz" class="tab-panel">
        <div class="tab-panel__header">
          <h2>ğŸ§  TECH QUIZ</h2>
          <p class="tab-panel__subtitle">500 Questions - 8 Categories - 3 Modes</p>
        </div>
        <div class="quiz-stats">
          <div class="stat-card">
            <div class="stat-value" id="quiz-score">0</div>
            <div class="stat-label">Score</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="quiz-timer-display" style="display: none;">
              <span id="quiz-timer">10:00</span>
            </div>
          </div>
        </div>
        <div class="quiz-categories">
          <button class="btn btn--active" onclick="selectQuizCategory('all', this)">All (500)</button>
          <button class="btn" onclick="selectQuizCategory('Web Dev', this)">Web Dev</button>
          <button class="btn" onclick="selectQuizCategory('JavaScript', this)">JavaScript</button>
          <button class="btn" onclick="selectQuizCategory('AI/ML', this)">AI/ML</button>
          <button class="btn" onclick="selectQuizCategory('Mobile', this)">Mobile</button>
          <button class="btn" onclick="selectQuizCategory('Cloud', this)">Cloud</button>
          <button class="btn" onclick="selectQuizCategory('Security', this)">Security</button>
          <button class="btn" onclick="selectQuizCategory('Blockchain', this)">Blockchain</button>
          <button class="btn" onclick="selectQuizCategory('DSA', this)">DSA</button>
        </div>
        <div class="quiz-modes">
          <button class="btn btn--primary" onclick="startQuiz('quick')">âš¡ Quick Mode (10 Questions)</button>
          <button class="btn btn--primary" onclick="startQuiz('timed')">â±ï¸ Timed Mode (20Q - 10min)</button>
          <button class="btn btn--primary" onclick="startQuiz('practice')">ğŸ“š Practice Mode (50 Questions)</button>
        </div>
        <div id="quiz-content"></div>
      </div>
    </div>
    
    <!-- Modal -->
    <div id="detail-modal" class="modal">
      <div class="modal__content">
        <button class="modal__close" onclick="closeModal()">âœ•</button>
        <div id="modal-body"></div>
      </div>
    </div>
  </div>
  
  <!-- SCRIPTS - CRITICAL ORDER! -->
  <!-- 1. External Libraries -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  
  <!-- 2. Data Files FIRST (Must load before everything else) -->
  <script src="data-communities.js"></script>
  <script src="data-quiz.js"></script>
  <script src="research-papers.js"></script>
  <script src="quiz-questions.js"></script>
  <script src="indian-labs.js"></script>
  <script src="communities.js"></script>
  
  <!-- 3. Core App (Defines AppState and core functions) -->
  <script src="app.js"></script>
  
  <!-- 4. Feature Scripts (Depend on app.js) -->
  <script src="tabs-navigation.js"></script>
  <script src="mission-system.js"></script>
  <script src="communities-enhanced.js"></script>
  <script src="chat-ai.js"></script>
  <script src="chat-integration.js"></script>
  <script src="communities-app.js"></script>
  
  <!-- 5. Fix Scripts (Override/enhance existing functions) -->
  <script src="research-fix.js"></script>
  <script src="search-functions.js"></script>
  <script src="final-fix.js"></script>
  <script src="complete-fix.js"></script>
  
  <!-- 6. Initialization Scripts -->
  <script src="init-all.js"></script>
  
  <!-- 7. MASTER FIX (Ensures 100% functionality) -->
  <script src="master-fix.js"></script>
  
  <script>
    console.log('âœ… Tech Mastery Lab Fully Loaded!');
    console.log('ğŸ“Š Data: 500 Communities, 500 Quiz Questions, 30 Research Papers');
    console.log('ğŸ›°ï¸ Features: News, Research, GitHub, Reddit, Satellite View, Communities, Chat, Quiz');
    console.log('ğŸ’¡ TIP: Open Console (F12) and run window.runDiagnostics() to check system status!');
  </script>
</body>
</html>
